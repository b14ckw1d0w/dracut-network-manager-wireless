# Maintainer: Your Name <your.email@example.com>
pkgname=dracut-network-manager-wireless
pkgver=1.0
pkgrel=1
pkgdesc="A custom dracut module for initializing Wi-Fi connections during the early boot process."
arch=('any')
url="https://github.com/bl4ckw1d0w/dracut-network-manager-wireless"
license=('Apache')
depends=('dracut' 'networkmanager' 'wpa_supplicant' 'clevis')
source=("dracut-network-manager-wireless-v$pkgver.zip::https://raw.githubusercontent.com/bl4ckw1d0w/dracut-network-manager-wireless/main/main/dracut-network-manager-wireless-v$pkgver.zip")
sha256sums=('a1deb32a61ce4344505985b57a316400d74975846efdcbbcef0c601abd064ca3')

package() {
    # Extract and install the files to the package directory
    install -dm755 "$pkgdir/etc/dracut.conf.d"
    install -m644 "$srcdir/etc/dracut.conf.d/network-manager-wireless.conf" "$pkgdir/etc/dracut.conf.d/"

    install -dm755 "$pkgdir/usr/lib/dracut/modules.d/30network-manager-wireless"
    install -m755 "$srcdir/usr/lib/dracut/modules.d/30network-manager-wireless/module-setup.sh" "$pkgdir/usr/lib/dracut/modules.d/30network-manager-wireless/"
}

